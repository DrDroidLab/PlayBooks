syntax = "proto3";
import "google/protobuf/wrappers.proto";

package protos.connectors;

message PeriodicRunStatus {
  enum StatusType {
    UNKNOWN = 0;
    STARTED = 1;
    FINISHED = 2;
    ERROR = 3;
  }
}

enum ConnectorType {
  UNKNOWN = 0;
  SENTRY = 1;
  SEGMENT = 2;
  ELASTIC_SEARCH = 3;
  AMPLITUDE = 4;
  AWS_KINESIS = 5;
  CLOUDWATCH = 6;
  CLEVERTAP = 7;
  RUDDERSTACK = 8;
  MOENGAGE = 9;
  CRIBL = 10;
  KAFKA = 11;
  DATADOG = 12;
  FILEBEAT = 13;
  LOGSTASH = 14;
  FLUENTD = 15;
  FLUENTBIT = 16;
  PAGER_DUTY = 17;
  NEW_RELIC = 18;
  SLACK = 19;
  HONEYBADGER = 20;
  GOOGLE_CHAT = 21;
  DATADOG_OAUTH = 22;
  GCM = 23;
  PROMETHEUS = 24;
  ELASTIC_APM = 25;
  VICTORIA_METRICS = 26;
  SLACK_CONNECT = 27;
  GRAFANA = 28;
  CLICKHOUSE = 29;
  DOCUMENTATION = 30;
  POSTGRES = 31;
  OPS_GENIE = 32;
  EKS = 33;
  AGENT_PROXY = 34;
  GRAFANA_VPC = 35;
  GITHUB_ACTIONS = 36;
  SQL_DATABASE_CONNECTION = 37;
  OPEN_AI = 38;
  AZURE = 39;
  REMOTE_SERVER = 40;
}


enum ConnectorMetadataModelType {
  UNKNOWN_MT = 0;
  // New Relic Models
  NEW_RELIC_POLICY = 1;
  NEW_RELIC_CONDITION = 2;
  NEW_RELIC_ENTITY = 3;
  NEW_RELIC_ENTITY_DASHBOARD = 4;
  NEW_RELIC_ENTITY_APPLICATION = 5;
  NEW_RELIC_NRQL = 6;

  //Datadog Models
  DATADOG_MONITOR = 101;
  DATADOG_DASHBOARD = 102;
  DATADOG_LIVE_INTEGRATION_AWS = 103;
  DATADOG_LIVE_INTEGRATION_AWS_LOG = 104;
  DATADOG_LIVE_INTEGRATION_AZURE = 105;
  DATADOG_LIVE_INTEGRATION_CLOUDFLARE = 106;
  DATADOG_LIVE_INTEGRATION_FASTLY = 107;
  DATADOG_LIVE_INTEGRATION_GCP = 108;
  DATADOG_LIVE_INTEGRATION_CONFLUENT = 109;
  DATADOG_SERVICE = 110;
  DATADOG_METRIC = 111;
  DATADOG_QUERY = 112;


  //Cloudwatch Models
  CLOUDWATCH_METRIC = 201;
  CLOUDWATCH_LOG_GROUP = 202;


  //Grafana Models
  GRAFANA_DATASOURCE = 301;
  GRAFANA_DASHBOARD = 302;
  GRAFANA_TARGET_METRIC_PROMQL = 303;

  //Clickhouse Models
  CLICKHOUSE_DATABASE = 401;

  //Slack Models
  SLACK_CHANNEL = 501;

  //Documentation Models
  MARKDOWN = 601;

  //Postgres Models
  POSTGRES_DATABASE = 701;

  //EKS Models
  EKS_CLUSTER = 801;

  //Sql Database Connection Models
  SQL_DATABASE_CONNECTION_RAW_QUERY = 901;

  // Azure Models
  AZURE_WORKSPACE = 1001;

  //Remote Server Models
  SSH_SERVER = 1100;
}

enum TransformerType {
  UNKNOWN_TT = 0;
  SEGMENT_DFAULT_TRANSFORMER = 2;
  AMPLITUDE_DEFAULT_TRANSFORMER = 3;
  PRODIGAL_CLOUDWATCH_LOG_TRANSFORMER = 4;
  CLOUDWATCH_JSON_LOG_TRANSFORMER = 5;
}


enum DecoderType {
  UNKNOWN_DT = 0;
  AWS_KINESIS_DECODER = 1;
  AWS_CLOUDWATCH_KINESIS_DECODER = 2;
}

enum ReportType {
  UNKNOWN_RT = 0;
  INITIAL = 1;
  FINAL = 2;
}

message Connector {
  google.protobuf.UInt64Value id = 1;
  ConnectorType type = 2;
  google.protobuf.BoolValue is_active = 3;
  google.protobuf.StringValue name = 4;
  google.protobuf.StringValue created_by = 5;
  sfixed64 created_at = 6;
  sfixed64 updated_at = 7;
  google.protobuf.StringValue display_name = 8;
  google.protobuf.StringValue category = 9;
  oneof config {
    SentryConnectorConfig sentry_config = 10;
  }
}

message SentryConnectorConfig {
  google.protobuf.UInt64Value polling_frequency = 1;
}

message ConnectorKey {
  enum KeyType {
    UNKNOWN = 0;
    SENTRY_API_KEY = 1;
    SENTRY_ORG_SLUG = 6;

    DATADOG_APP_KEY = 2;
    DATADOG_API_KEY = 3;
    DATADOG_AUTH_TOKEN = 15;
    DATADOG_API_DOMAIN = 18;

    NEWRELIC_API_KEY = 4;
    NEWRELIC_APP_ID = 5;
    NEWRELIC_QUERY_KEY = 7;
    NEWRELIC_API_DOMAIN = 19;

    SLACK_BOT_AUTH_TOKEN = 8;
    SLACK_CHANNEL = 9;

    HONEYBADGER_USERNAME = 10;
    HONEYBADGER_PASSWORD = 11;
    HONEYBADGER_PROJECT_ID = 12;

    AWS_ACCESS_KEY = 13;
    AWS_SECRET_KEY = 14;
    AWS_REGION = 20;
    AWS_ASSUMED_ROLE_ARN = 23;
    EKS_ROLE_ARN = 40;

    GOOGLE_CHAT_BOT_OAUTH_TOKEN = 16;
    GOOGLE_CHAT_BOT_SPACES = 17;

    GRAFANA_HOST = 21;
    GRAFANA_API_KEY = 22;

    CLICKHOUSE_INTERFACE = 24;
    CLICKHOUSE_HOST = 25;
    CLICKHOUSE_PORT = 26;
    CLICKHOUSE_USER = 27;
    CLICKHOUSE_PASSWORD = 28;

    GCM_PROJECT_ID = 29;
    GCM_PRIVATE_KEY = 30;
    GCM_CLIENT_EMAIL = 31;
    GCM_TOKEN_URI = 32;

    POSTGRES_HOST = 33;
    POSTGRES_USER = 34;
    POSTGRES_PASSWORD = 35;
    POSTGRES_PORT = 36;
    POSTGRES_DATABASE = 37;
    POSTGRES_OPTIONS = 38;

    SQL_DATABASE_CONNECTION_STRING_URI = 39;

    PAGER_DUTY_API_KEY = 41;
    OPS_GENIE_API_KEY = 42;

    AGENT_PROXY_HOST = 43;
    AGENT_PROXY_API_KEY = 44;

    GITHUB_ACTIONS_TOKEN = 45;

    SLACK_APP_ID = 46;

    OPEN_AI_API_KEY = 47;


    AZURE_SUBSCRIPTION_ID = 48;
    AZURE_TENANT_ID = 49;
    AZURE_CLIENT_ID = 50;
    AZURE_CLIENT_SECRET = 51;

    REMOTE_SERVER_PEM = 52;
    REMOTE_SERVER_USER = 53;
    REMOTE_SERVER_HOST = 54;
    REMOTE_SERVER_PASSWORD = 55;

  }

  google.protobuf.UInt64Value id = 1;
  KeyType key_type = 2;
  google.protobuf.StringValue key = 3;
  google.protobuf.BoolValue is_active = 4;
  google.protobuf.UInt64Value connector_id = 5;
  sfixed64 created_at = 6;
  sfixed64 updated_at = 7;
  google.protobuf.StringValue display_name = 8;
}

message UpdateConnectorOp {
  enum Op {
    UNKNOWN = 0;
    UPDATE_CONNECTOR_NAME = 1;
    UPDATE_CONNECTOR_STATUS = 2;
    UPDATE_CONNECTOR_KEYS = 3;
  }

  message UpdateConnectorName {
    google.protobuf.StringValue name = 1;
  }

  message UpdateConnectorStatus {
    google.protobuf.BoolValue is_active = 1;
  }

  message UpdateConnectorKeys {
    repeated ConnectorKey connector_keys = 1;
  }

  Op op = 1;
  oneof update {
    UpdateConnectorName update_connector_name = 2;
    UpdateConnectorStatus update_connector_status = 3;
    UpdateConnectorKeys update_connector_keys = 4;
  }
}

message AccountActiveConnectorModelTypes {
  message ConnectorMetadataModelTypeMap {
    ConnectorMetadataModelType model_type = 1;
    google.protobuf.StringValue display_name = 2;
  }
  ConnectorType connector_type = 1;
  repeated ConnectorMetadataModelTypeMap model_types_map = 2;
}
